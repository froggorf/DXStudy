// 02.13
// ?筌뤾봇遊????븐슦異?5 ?袁⑤?獄?쓣紐??釉뚯뫒???????????븐슦異??怨쀬Ŧ ??얜??먬쨹貫理???袁⑤?獄???낅퉵??
// ?筌뤾봇遊??源낇벀嶺뚯쉳????袁⑤??얇깿????繹??瑜곷굵 ??⑤벡????덈펲.  https://dev.epicgames.com/documentation/ko-kr/unreal-engine/coding-standard?application_version=4.27
// ??怨몃첉??

#pragma once

#include "Engine/MyEngineUtils.h"

#include "UActorComponent.h"

class USceneComponent : public UActorComponent
{
public:
	USceneComponent();
	~USceneComponent();

	USceneComponent* GetAttachParent() const { return AttachParent.get(); }
	std::string GetAttachSocketName() const { return AttachSocketName; }
	
	// ???샑???怨뺣콦?띠럾? ?繹먮굞夷??????筌??怨뚯꽕?筌? ?遊붋嶺뚮ㅄ維곮굢??釉먮듌?????貫??(??諛댁뎽?????????????貫???????濡レ┣????釉붋?
	// ???샑???怨뺣콦?띠럾? ?熬곣뫗異??繹먮굞夷??? ??? ?롪퍔????AttachToComponent??貫?양솻洹???????貫????????濡レ┣??雅?굝???
	void SetupAttachment(USceneComponent* InParent, std::string InSocketName = "");

	// ?筌뤾봇遊????븐슦異??????딄눔pdateTransformFlags, ETeleportType?????깆젧???嶺???紐꾩끋
	virtual void UpdateComponentToWorld() override final
	{
		//UpdateComponentToWorldWithParent(GetAttachParent(), GetAttachSocketName(), )
	}

protected:
private:
	// ???섎??遊붋?띠럾? 嶺뚳퐣瑗????怨몃턄 AttachParent???띠룆?????瑜곸젧
	void SetAttachParent(USceneComponent* NewAttachParent);

	// ???섎??遊붋?띠럾? 嶺뚳퐣瑗????怨몃턄 AttachSocketName???띠룆?????瑜곸젧
	void SetAttachSocketName(std::string NewSocketName);

	void UpdateComponentToWorldWithParent(USceneComponent* Parent, std::string SocketName, const DirectX::XMVECTOR& RelativeRotationQuat);
public:
protected:
private:
	// ?遊붋嶺뚮ㅄ維???熬곣뫚?꾢슖?る츊????????⑤챷逾?Transform ?筌먲퐢沅??
	DirectX::XMFLOAT3 RelativeLocation;
	DirectX::XMFLOAT3 RelativeRotation;
	DirectX::XMFLOAT3 RelativeScale3D;

	// ??븐뼔援???レ뒭筌?Transform
	FTransform ComponentToWorld;

	// ?熬곣뫗????????????샑???怨뺣콦?띠럾? ?遊붋嶺뚢뼰維뽳쭕??遊붋嶺??????샑???怨뺣콦
	// ?遊붋嶺뚢뼰維쀥ㅇ????????熬곣뫚??????????????샑???怨뺣콦?띠럾? ?????⑤챷紐드슖???⑤챷???
	std::shared_ptr<USceneComponent> AttachParent;

	// ?遊붋嶺뚢뼰維쀥ㅇ?????猷?????藥?
	std::string AttachSocketName;

	// ??????????샑???怨뺣콦???遊붋嶺뚢뼰維뽳쭕????六??????샑???怨뺣콦 ?꾩룄?ｈ굢?
	std::vector<std::shared_ptr<USceneComponent>> AttachChildren;

};